---
description: 
globs: 
alwaysApply: true
---
OnSell

VisÃ£o EstratÃ©gica e Modelo de NegÃ³cio

Contexto do NegÃ³cio

O OnSell Ã© uma plataforma SaaS projetada especificamente para pequenas e mÃ©dias empresas que buscam automatizar o processo de geraÃ§Ã£o, qualificaÃ§Ã£o e conversÃ£o de leads por meio da inteligÃªncia artificial. A plataforma elimina ou reduz drasticamente a necessidade de grandes equipes comerciais e departamentos de marketing, substituindo operaÃ§Ãµes manuais por automaÃ§Ãµes integradas com canais populares como WhatsApp, e-mail, redes sociais e telefonia.

O diferencial estratÃ©gico da OnSell estÃ¡ em sua capacidade de oferecer uma soluÃ§Ã£o completa, automatizada e acessÃ­vel, com alta personalizaÃ§Ã£o atravÃ©s de um sistema robusto de white label para agÃªncias parceiras.

PÃºblico-Alvo
    â€¢   Cliente Final: Empresas que desejam escalar vendas rapidamente, com baixo investimento inicial e sem necessidade de grandes equipes.
    â€¢   AgÃªncias: Parceiros estratÃ©gicos que vendem a soluÃ§Ã£o sob sua marca prÃ³pria, criando planos personalizados e landing pages customizadas.
    â€¢   AdministraÃ§Ã£o (Admin): ResponsÃ¡vel pela gestÃ£o global da plataforma, administraÃ§Ã£o de agÃªncias e clientes diretos sem intermediÃ¡rios.

Estrutura de Contas
    â€¢   Admin: Controle absoluto do sistema, gerenciamento de agÃªncias, clientes diretos, faturamento, configuraÃ§Ã£o geral e auditoria.
    â€¢   AgÃªncia: PersonalizaÃ§Ã£o total (cores, logotipo, domÃ­nio prÃ³prio), criaÃ§Ã£o e gestÃ£o de clientes, planos personalizados e relatÃ³rios consolidados.
    â€¢   Cliente Final: Acesso a funcionalidades prÃ¡ticas do sistema (pipeline, inbox, automaÃ§Ã£o de vendas, relatÃ³rios).

â¸»

Funcionalidades Detalhadas

Admin e AgÃªncias (Contas de GestÃ£o)
    â€¢   Gerenciamento Centralizado: CriaÃ§Ã£o, monitoramento e gerenciamento completo de clientes.
    â€¢   White Label Total: CustomizaÃ§Ã£o visual completa, domÃ­nio personalizado, landing pages exclusivas.
    â€¢   PersonalizaÃ§Ã£o de Planos: DefiniÃ§Ã£o especÃ­fica de recursos e limites por cliente.
    â€¢   ImpersonaÃ§Ã£o Segura: Acesso seguro Ã s contas de clientes para suporte, auditoria e assistÃªncia.
    â€¢   RelatÃ³rios de Performance: Acompanhamento em tempo real do desempenho global e especÃ­fico de clientes.

Cliente Final (Principais Funcionalidades)

Pipeline de Vendas
    â€¢   Interface visual Kanban, totalmente personalizÃ¡vel.
    â€¢   OrganizaÃ§Ã£o eficiente dos leads e etapas comerciais.
    â€¢   IntegraÃ§Ã£o direta e automÃ¡tica com fluxos de automaÃ§Ã£o.

Inbox Inteligente
    â€¢   Centraliza mensagens recebidas via WhatsApp, e-mail e redes sociais.
    â€¢   Respostas automÃ¡ticas utilizando IA com histÃ³rico completo.
    â€¢   Possibilidade de intervenÃ§Ã£o manual quando necessÃ¡rio.

AutomaÃ§Ã£o AvanÃ§ada de Vendas
    â€¢   Fluxos dinÃ¢micos utilizando IA para qualificaÃ§Ã£o detalhada dos leads.
    â€¢   GestÃ£o inteligente e automÃ¡tica de campanhas de publicidade digital.
    â€¢   CriaÃ§Ã£o de landing pages otimizadas pela IA.

RelatÃ³rios e AnÃ¡lises
    â€¢   Dashboard intuitivo com mÃ©tricas claras (custos por lead, conversÃµes, desempenho das campanhas).
    â€¢   RelatÃ³rios detalhados por perÃ­odo, canal e campanha.

ConfiguraÃ§Ãµes AvanÃ§adas
    â€¢   ConexÃµes simplificadas com serviÃ§os externos (WhatsApp, SMTP, APIs Meta e Google).
    â€¢   GestÃ£o de produtos e serviÃ§os ofertados pelo cliente.

â¸»

Modelo Comercial e Estrutura de Planos

Tipos de Planos Oferecidos
    â€¢   Plano Starter: Ideal para pequenas empresas com necessidades bÃ¡sicas de automaÃ§Ã£o e volume limitado de leads.
    â€¢   Plano Pro: Para empresas em crescimento, com maiores volumes e necessidade de mais automaÃ§Ãµes e integraÃ§Ãµes.
    â€¢   Plano Enterprise: Empresas consolidadas com necessidades especÃ­ficas, maior personalizaÃ§Ã£o e alto volume operacional.

Possibilidades de PreÃ§os
    â€¢   Planos baseados em volumes de leads capturados mensalmente.
    â€¢   Planos com diferentes nÃ­veis de acesso Ã s funcionalidades (integraÃ§Ãµes, automaÃ§Ãµes, personalizaÃ§Ã£o).
    â€¢   PreÃ§os especiais e planos customizados oferecidos por agÃªncias parceiras.
â¸»

Gerenciamento de Recursos e Planos

Recursos DisponÃ­veis por Plano
    â€¢   Quantidade mÃ¡xima de contatos gerenciados.
    â€¢   NÃºmero de pipelines e automaÃ§Ãµes simultÃ¢neas.
    â€¢   IntegraÃ§Ãµes externas disponÃ­veis (WhatsApp, e-mails, Google, Meta).
    â€¢   PersonalizaÃ§Ã£o de landing pages e domÃ­nios.

Planos EspecÃ­ficos para AgÃªncias
    â€¢   CapacitaÃ§Ã£o para criar planos personalizados para clientes finais.
    â€¢   GestÃ£o facilitada e detalhada dos recursos oferecidos aos clientes.
    â€¢   White Label completo para fortalecer a marca prÃ³pria.

â¸»

SeguranÃ§a, Compliance e Auditoria
    â€¢   Auditoria rigorosa e automatizada de acessos e aÃ§Ãµes (principalmente impersonaÃ§Ã£o).
    â€¢   AutomatizaÃ§Ã£o da emissÃ£o de certificados SSL para todos os domÃ­nios personalizados.
    â€¢   Estrutura robusta de seguranÃ§a para armazenamento e trÃ¡fego de dados.

â¸»

ConclusÃ£o

O OnSell, jÃ¡ em sua versÃ£o inicial monolÃ­tica, oferece uma plataforma poderosa e eficiente para automatizar vendas, reduzir custos operacionais e proporcionar crescimento acelerado Ã s pequenas empresas. Com seu modelo flexÃ­vel e robusto de negÃ³cios, Ã© uma soluÃ§Ã£o atrativa tambÃ©m para agÃªncias que desejam expandir seus serviÃ§os digitais com total controle e personalizaÃ§Ã£o.

NÃ­veis de Acesso e PermissÃµes
1. Admin
Pode criar e gerenciar AgÃªncias (com ou sem white label)

Pode criar Clientes diretos ou vinculados a AgÃªncias

Pode impersonar qualquer AgÃªncia ou Cliente

2. AgÃªncia (White Label)
Pode criar e gerenciar Clientes sob sua bandeira

Pode personalizar o branding completo (cores, domÃ­nio, logo, etc.)

Pode impersonar apenas seus prÃ³prios Clientes

3. Cliente Final
Pode ser cliente direto da plataforma (sem vÃ­nculo com AgÃªncia) ou estar sob gestÃ£o de uma AgÃªncia

Acesso apenas aos recursos operacionais do sistema

Menus e Funcionalidades por Perfil
Menu do Cliente
(Somente funcionalidades operacionais, foco no uso do sistema)

- Painel (Dashboard de Vendas)
- Pipeline (Kanban de oportunidades)
- Mensagens (Inbox unificado: WhatsApp, e-mail, redes sociais)
- AutomaÃ§Ã£o (Fluxos automatizados de qualificaÃ§Ã£o e follow-up)
- Contatos (Base de leads e clientes)
- RelatÃ³rios (Performance, conversÃ£o, canais, etc.)
- IntegraÃ§Ãµes (WhatsApp, Meta, Google, SMTP, etc.)
- ConfiguraÃ§Ãµes (UsuÃ¡rios, permissÃµes internas, domÃ­nios, branding bÃ¡sico)

Menu da AgÃªncia (White Label)
(Foco na gestÃ£o de clientes, estrutura prÃ³pria e monetizaÃ§Ã£o)
- Clientes (GestÃ£o de todos os clientes da agÃªncia)
- AgÃªncias (caso a agÃªncia seja uma master e tenha subagÃªncias - opcional)
- White Label (ConfiguraÃ§Ãµes visuais, domÃ­nio, certificado SSL, marca)
- Planos (CriaÃ§Ã£o e atribuiÃ§Ã£o de planos personalizados por cliente)
- ConfiguraÃ§Ãµes (PreferÃªncias da agÃªncia, faturamento prÃ³prio, notificaÃ§Ãµes)
Obs: A opÃ§Ã£o AgÃªncias pode ser oculta se nÃ£o houver hierarquia de subagÃªncias.

Menu do Admin
(Foco total na gestÃ£o e auditoria da plataforma)
- Clientes (Todos os clientes da plataforma)
- AgÃªncias (Todas as agÃªncias registradas)
- Planos (Planos globais, templates para agÃªncias e clientes diretos)
- IntegraÃ§Ãµes (Gerenciamento central de integraÃ§Ãµes nativas - ex: Evolution API)
- ConfiguraÃ§Ãµes
    - Branding da plataforma principal
    - Certificados SSL automÃ¡ticos
    - ParÃ¢metros de cobranÃ§a (Stripe, Iugu, etc.)
    - SeguranÃ§a (polÃ­tica de senha, SSO, etc.)
    - Logs e Auditorias


ImpersonaÃ§Ã£o e SeguranÃ§a
ImpersonaÃ§Ã£o segura via middleware:

Admin pode acessar:
Qualquer AgÃªncia
Qualquer Cliente (direto ou vinculado a agÃªncia)

AgÃªncia pode acessar:
Apenas seus prÃ³prios clientes
Sem acesso a outras agÃªncias ou clientes de outros

Middleware exemplo (ImpersonationMiddleware):
if (auth()->user()->hasRole('admin.super')) {
    // pode impersonar qualquer conta
} elseif (auth()->user()->hasRole('agency.manage')) {
    // sÃ³ pode impersonar clientes que pertencem Ã  agÃªncia
} else {
    abort(403);
}


Tecnologia de Apoio
spatie/laravel-permission para controlar os papÃ©is e permissÃµes.
stancl/tenancy com domÃ­nios por tenant.
Middleware Impersonate com logs detalhados de acesso (usando Laravel Auditing).
Filament Admin ou Painel Custom com Inertia.js para menus dinÃ¢micos por role.

âœ… Stack TÃ©cnica (Laravel 12 + React + shadcn)
Camada  Tecnologia
Backend Laravel 12 (PHP 8.3)
Frontend    React 18 (via Vite)
UI Lib  shadcn/ui com TailwindCSS
Multi-tenancy   stancl/tenancy
AutenticaÃ§Ã£o    Laravel Breeze (React) ou Fortify customizado
AutorizaÃ§Ã£o spatie/laravel-permission
ImpersonaÃ§Ã£o    Custom middleware + laravel-impersonate opcional
Painel Admin    Custom (React + shadcn), nÃ£o usa Nova nem Filament
DB  PostgreSQL + Redis (queues + cache)
Hospedagem  DigitalOcean + Laravel Forge


ðŸ§  OrganizaÃ§Ã£o do Projeto
onsell/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Http/
â”‚   â”‚   â”œâ”€â”€ Controllers/      // LÃ³gica API
â”‚   â”‚   â”œâ”€â”€ Middleware/       // Impersonation, Tenancy, etc.
â”‚   â”‚   â”œâ”€â”€ Requests/         // ValidaÃ§Ãµes
â”‚   â”œâ”€â”€ Models/               // User, Client, Agency, etc.
â”‚   â”œâ”€â”€ Services/             // WhatsApp, Automations, etc.
â”‚   â”œâ”€â”€ Actions/              // AÃ§Ãµes organizadas
â”‚   â”œâ”€â”€ Policies/             // AutorizaÃ§Ã£o por role
â”‚   â””â”€â”€ ...
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ api.php               // Rotas protegidas, consumidas pelo React
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ js/                   // React Frontend
â”‚   â”‚   â”œâ”€â”€ app.jsx
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ Agency/
â”‚   â”‚   â”‚   â”œâ”€â”€ Client/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ layouts/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ seeders/
â”‚   â”œâ”€â”€ tenant/               // Migrations para tenants
â”‚   â””â”€â”€ landlord/             // Migrations globais
â”œâ”€â”€ public/
â”œâ”€â”€ config/
â”œâ”€â”€ tests/
â”œâ”€â”€ vite.config.js
â””â”€â”€ tailwind.config.js


ðŸŽ¯ GestÃ£o de Perfis + ImpersonaÃ§Ã£o
PapÃ©is (com spatie/permission)

admin.super
agency.owner
client.user

ImpersonaÃ§Ã£o
Admin â†’ impersona AgÃªncias e Clientes
AgÃªncia â†’ impersona apenas seus Clientes

Middleware customizado (CheckImpersonationAccess)
Logs com laravel-auditing

ðŸ§© Menus por Perfil (React)
VocÃª pode ter um componente Sidebar.jsx que se adapta conforme o tipo de usuÃ¡rio:
const sidebarConfig = {
  admin: [
    { label: "Clientes", to: "/admin/clients" },
    { label: "AgÃªncias", to: "/admin/agencies" },
    { label: "Planos", to: "/admin/plans" },
    { label: "IntegraÃ§Ãµes", to: "/admin/integrations" },
    { label: "ConfiguraÃ§Ãµes", to: "/admin/settings" },
  ],
  agency: [
    { label: "Clientes", to: "/agency/clients" },
    { label: "White Label", to: "/agency/branding" },
    { label: "Planos", to: "/agency/plans" },
    { label: "ConfiguraÃ§Ãµes", to: "/agency/settings" },
  ],
  client: [
    { label: "Painel", to: "/dashboard" },
    { label: "Pipeline", to: "/pipeline" },
    { label: "Mensagens", to: "/messages" },
    { label: "AutomaÃ§Ã£o", to: "/automation" },
    { label: "Contatos", to: "/contacts" },
    { label: "RelatÃ³rios", to: "/reports" },
    { label: "IntegraÃ§Ãµes", to: "/integrations" },
    { label: "ConfiguraÃ§Ãµes", to: "/settings" },
  ],
};
E no layout:
const Sidebar = () => {
  const { role } = useUser(); // pegando do contexto ou JWT
  const menu = sidebarConfig[role];

  return (
    <aside className="w-64 p-4 border-r">
      {menu.map((item, i) => (
        <Link key={i} to={item.to} className="block py-2 hover:underline">
          {item.label}
        </Link>
      ))}
    </aside>
  );
};

ðŸ”’ SeguranÃ§a
Middleware por papel e tenant (role, tenant, impersonate)
Auditoria (acessos e aÃ§Ãµes)
SSL automÃ¡tico por domÃ­nio (via Let's Encrypt e Cloudflare)
ProteÃ§Ã£o para APIs com Throttle + Rate Limiting

ðŸš€ Vantagens dessa abordagem
Aspecto BenefÃ­cio
MonolÃ­tico com Laravel  Backend estruturado, rÃ¡pido e seguro
React + shadcn  UI moderna, responsiva, pronta para escalar
Multi-tenancy isolado   White label real com domÃ­nio prÃ³prio e dados isolados
ImpersonaÃ§Ã£o segura Ajuda no suporte e auditoria sem comprometer seguranÃ§a
Arquitetura modular FÃ¡cil migraÃ§Ã£o futura para microserviÃ§os ou headless API



